---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import type { ImageMetadata } from "astro";

interface Props {
  id: string;
  name: string;
  role: string;
  avatar: ImageMetadata;
  email?: string;
}

const { id, name, role, avatar, email } = Astro.props;
---

<button
  type="button"
  data-staff-id={id}
  class="staff-card group surface h-full cursor-pointer overflow-hidden border-border text-left transition-colors duration-300 hover:border-primary/70"
>
  <div class="relative aspect-square w-full overflow-hidden bg-secondary/40">
    <Image
      src={avatar}
      alt={name}
      class="h-full w-full object-cover"
      width={640}
      height={640}
    />
  </div>
  <div class="p-5">
    <h3 class="text-lg font-semibold text-foreground">{name}</h3>
    {role && (
      <p class="mt-1 text-sm text-muted-foreground">{role}</p>
    )}

    {email && (
      <div class="mt-4 min-w-0">
        <a
          href={`mailto:${email}`}
          class="inline-flex max-w-full items-center gap-2 rounded-full border border-border bg-background px-3 py-1.5 text-xs font-medium text-muted-foreground transition group-hover:border-primary/40 group-hover:text-primary"
          aria-label={`Email ${name}`}
          title={email}
        >
          <Icon name="mdi:email-outline" class="h-4 w-4" aria-hidden="true" />
          <span class="min-w-0 max-w-60 truncate">{email}</span>
        </a>
      </div>
    )}
  </div>
</button>
