---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import defaultImage from "../assets/images/alumni/default.png";
const alumni = await getCollection("alumniCollection");
const students = alumni.flatMap((batch: any) => batch.data.students).slice(0, 10);
---
<div class="w-full overflow-hidden bg-gradient-to-r from-background via-background to-background py-8">
    <div class="flex animate-marquee">
        {[...students, ...students].map((student: any) => {
            const batch = alumni.find((b: any) => b.data.students.includes(student))?.data;
            return (
                <div class="flex flex-col items-center flex-shrink-0 gap-4 mx-6">
                    <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-primary shadow-lg">
                        <Image 
                            src={student.image || defaultImage} 
                            alt={student.name}
                            class="w-full h-full object-cover"
                        />
                    </div>
                    <div class="text-center">
                        <p class="text-base font-semibold text-foreground whitespace-nowrap">
                            {student.name} | {batch?.year}
                        </p>
                        <p class="text-sm text-muted-foreground whitespace-nowrap">
                            {student.university.name}
                        </p>
                    </div>
                </div>
            );
        })}
    </div>
</div>

<style>
    @keyframes marquee {
        from {
            transform: translateX(0);
        }
        to {
            transform: translateX(-50%);
        }
    }
    
    .animate-marquee {
        display: flex;
        animation: marquee 30s linear infinite;
        width: max-content;
    }
    
    .animate-marquee:hover {
        animation-play-state: paused;
    }
</style>