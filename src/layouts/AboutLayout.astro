---
import Layout from "./Layout.astro";
import { siteConfig } from "../data/constants";

interface Props {
  sectionTitle: string;
  sectionPath: string;
  description?: string;
  eyebrow?: string;
  headline?: string;
  lead?: string;
  linksInHead?: string[];
  structuredData?: Record<string, unknown> | Record<string, unknown>[];
}

const {
  sectionTitle,
  sectionPath,
  description,
  eyebrow = "About",
  headline,
  lead,
  linksInHead = [],
  structuredData,
} = Astro.props;

const normalizedSectionPath = sectionPath.startsWith("/") ? sectionPath : `/${sectionPath}`;
const aboutPath = "/about";
const normalizedHeadline = headline ?? sectionTitle;
const normalizedLead = lead ?? description;

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: "About",
      item: `${siteConfig.url}${aboutPath}`,
    },
    {
      "@type": "ListItem",
      position: 2,
      name: sectionTitle,
      item: `${siteConfig.url}${normalizedSectionPath}`,
    },
  ],
};

const additionalStructuredData = structuredData
  ? Array.isArray(structuredData)
    ? structuredData
    : [structuredData]
  : [];

const pageStructuredData = [breadcrumbSchema, ...additionalStructuredData];
---

<Layout
  title={`${sectionTitle} | About`}
  description={description}
  linksInHead={linksInHead}
  structuredData={pageStructuredData}
>
  <section class="relative overflow-hidden bg-linear-to-b from-primary/10 via-background to-background py-16 md:py-20">
    <div class="absolute -top-24 right-0 h-72 w-72 rounded-full bg-primary/10 blur-3xl" aria-hidden="true"></div>
    <div class="absolute -bottom-24 left-0 h-72 w-72 rounded-full bg-secondary/80 blur-3xl" aria-hidden="true"></div>

    <div class="section-inner relative">
      <nav aria-label="Breadcrumb" class="text-sm text-muted-foreground">
        <ol class="flex flex-wrap items-center gap-2">
          <li>
            <a href="/about" class="transition hover:text-foreground">About</a>
          </li>
          <li aria-hidden="true">/</li>
          <li class="text-foreground">{sectionTitle}</li>
        </ol>
      </nav>

      <div class="mt-6 max-w-3xl">
        <p class="eyebrow">{eyebrow}</p>
        <h1 class="section-title mt-3">{normalizedHeadline}</h1>
        {normalizedLead && <p class="section-lead max-w-2xl">{normalizedLead}</p>}
      </div>
    </div>
  </section>

  <slot />
</Layout>
